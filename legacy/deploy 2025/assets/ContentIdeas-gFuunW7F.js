import{u as A,a as D,r as a,j as e,S as w,g as H,m as T,n as P}from"./index-Czd6NKCg.js";import{L as B}from"./AppContent-CQwVeAxa.js";const R=({onGenerateFromIdeas:I})=>{const{t:s,language:N}=A(),{user:d}=D(),[b,S]=a.useState([]),[i,v]=a.useState(""),[p,k]=a.useState(""),[c,f]=a.useState(!1),[h,y]=a.useState([]),[o,u]=a.useState([]),[j,g]=a.useState(null);a.useEffect(()=>{(async()=>{if(d){const r=await H(d.id);S(r)}})()},[d]);const m=b.find(t=>t.id===i),x=5,F=(t,r)=>{r?o.length<x&&!o.some(n=>n.topic===t.topic)&&u(n=>[...n,t]):u(n=>n.filter(l=>l.topic!==t.topic))},E=t=>{u(r=>r.filter(n=>n.topic!==t.topic))},C=async()=>{if(!m){g(s("contentIdeas.errors.noDescription"));return}f(!0),g(null),y([]);try{const r=(await T(d.id)).filter(l=>l.siteId===m.id).slice(0,5).map(l=>({title:l.post.title,keywords:l.post.keywords})),n=await P(m.siteDescription||m.name,p,r,N);if(Array.isArray(n))y(n);else throw new Error(s("contentIdeas.errors.generationFailed"))}catch(t){g(t instanceof Error?t.message:s("contentIdeas.errors.generationFailed"))}finally{f(!1)}},L=()=>{const t=o.map(r=>({id:"",topic:r.topic,keywords:r.keywords}));I(t)};return e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 p-6 rounded-lg shadow-lg max-w-4xl mx-auto text-white",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[e.jsx(B,{className:"h-6 w-6 mr-3 text-yellow-400"}),s("contentIdeas.title")]}),e.jsx("p",{className:"text-sm text-gray-300 mb-6",children:s("contentIdeas.subtitle")}),e.jsxs("div",{className:"space-y-4 bg-black/20 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"site-select",className:"block text-sm font-medium text-gray-300 mb-1",children:s("contentIdeas.selectSiteLabel")}),e.jsxs("select",{id:"site-select",value:i,onChange:t=>v(t.target.value),className:"w-full p-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:ring-[#FFE500] focus:border-[#FFE500] transition",children:[e.jsx("option",{value:"",children:s("contentIdeas.selectSitePlaceholder")}),b.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"focus-input",className:"block text-sm font-medium text-gray-300 mb-1",children:s("contentIdeas.focusLabel")}),e.jsx("textarea",{id:"focus-input",rows:2,className:"w-full p-2 border border-gray-600 rounded-md bg-gray-800 text-white focus:ring-[#FFE500] focus:border-[#FFE500] transition",placeholder:s("contentIdeas.focusPlaceholder"),value:p,onChange:t=>k(t.target.value),disabled:!i})]}),e.jsx("button",{onClick:C,disabled:c||!i||o.length>=x,className:"w-full flex items-center justify-center py-2 px-4 bg-[#FFE500] text-black font-bold rounded-lg hover:bg-yellow-400 disabled:bg-yellow-800 transition-colors",children:c?e.jsx(w,{}):s("contentIdeas.generateButton")})]}),j&&e.jsx("p",{className:"text-red-400 text-center mt-4",children:j}),e.jsxs("div",{className:"mt-8 min-h-[20rem]",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:s("contentIdeas.resultsTitle")}),c&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{large:!0}),e.jsx("p",{className:"mt-2 text-gray-400",children:s("contentIdeas.loading")})]}),!c&&h.length===0&&e.jsx("div",{className:"text-center py-8 border-2 border-dashed border-gray-700 rounded-lg",children:e.jsx("p",{className:"text-gray-400",children:s("contentIdeas.noIdeas")})}),!c&&h.length>0&&e.jsx("div",{className:"space-y-4",children:h.map((t,r)=>e.jsxs("div",{className:"flex items-center bg-black/20 p-3 rounded-lg border border-white/10",children:[e.jsx("input",{type:"checkbox",id:`idea-${r}`,className:"h-5 w-5 rounded bg-gray-700 border-gray-600 text-yellow-400 focus:ring-yellow-500 cursor-pointer disabled:cursor-not-allowed",checked:o.some(n=>n.topic===t.topic),disabled:o.length>=x&&!o.some(n=>n.topic===t.topic),onChange:n=>F(t,n.target.checked)}),e.jsxs("label",{htmlFor:`idea-${r}`,className:"ml-3 flex-grow cursor-pointer",children:[e.jsx("h4",{className:"font-bold text-white",children:t.topic}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-medium text-gray-300",children:[s("contentIdeas.keywordsLabel"),":"]})," ",t.keywords]})]})]},r))})]}),o.length>0&&e.jsxs("div",{className:"mt-8 pt-6 border-t border-white/20",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4",children:[s("contentIdeas.queueTitle")," (",o.length,"/",x,")"]}),e.jsx("div",{className:"space-y-3 bg-black/20 p-4 rounded-lg",children:o.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 p-3 rounded-md",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:t.topic}),e.jsx("p",{className:"text-xs text-gray-400",children:t.keywords})]}),e.jsx("button",{onClick:()=>E(t),className:"text-red-400 hover:text-red-300 p-1",children:"Ã—"})]},r))}),e.jsx("button",{onClick:L,className:"mt-4 w-full flex items-center justify-center py-3 px-4 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors",children:s("contentIdeas.generateFromQueueButton",{count:o.length})})]})]})};export{R as ContentIdeas,R as default};
